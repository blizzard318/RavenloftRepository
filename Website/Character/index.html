<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Characters</title>
	<meta name="theme-color" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ravenloft Repository">
	<link rel="stylesheet" href="../styles.css">
	<link rel="shortcut icon" href="../favicon.ico">
	<script src="../sort.js" charset="utf-8"></script>
</head>

<body>
	<h1>
		<a href=".."		 >Official </a> |
		<a href="../3rdParty">3rd Party</a>
	</h1><hr />
	
	<h2>
		<a href="../Source"	  >Sources   </a> | 
		<a href="../Domain"	  >Domains   </a> | 
		<a href="../Location" >Locations </a> | 
		<a href="../Character">Characters</a> | 
		<a href="../Item"	  >Items	 </a><br/>
		<a href="../Creature" >Creatures </a> | 
		<a href="../Group" 	  >Groups 	 </a> | 
		<a href="../Language" >Languages </a>
	</h2><hr />
	
	<h2>
		<input type="button" onclick="SwapDisplay('domain')" value="By Domain"> | 
		<input type="button" onclick="SwapDisplay('group')" value = "By Group">
	</h2>
	<br/>

	<div id="domain" style="display:block">
	</div>
	
	<div id="group" style="display:none">
	</div>
	
	<script>
	function SwapDisplay(name) {
		if (name == "domain") {
			document.getElementById("domain").style.display = "block";
			document.getElementById("group").style.display = "none";
		} else if (name == 'group'){
			document.getElementById("domain").style.display = "none";
			document.getElementById("group").style.display = "block";
		}
	}
	
	async function func(){
		const CharactersData = await fetch("Character.json");
		const Characters = await CharactersData.json();

		for (const character of Characters) {
			const Domains = character.Domains.split(',');
			for (const domain of Domains) {
				if (!document.getElementById(domain)) {
					const domaindiv = document.getElementById("domain");
					const b = document.createElement("b");
						b.style.fontSize = "25px";
						b.innerHTML = "Characters of " + domain;
					domaindiv.append(b);

					const table = document.createElement("table");
						table.border = "1";
						table.rules = "cols";
						table.cellspacing = "0";
						table.cellpadding = "3";
						table.id = domain;
					domaindiv.append(table);
					domaindiv.append(document.createElement("br"));

					const row = table.insertRow(-1);
						row.style.backgroundColor  = "black";
						let cell = document.createElement("th");
							cell.scope = "col";
							cell.innerHTML = "<b>Name(s)</b>";
					row.appendChild(cell);

					AddEditionHeader(domain);
				}
				const DeceasedId = "Deceased" + domain;
				if (character.Types.includes("Deceased")){
					if (!document.getElementById(DeceasedId)) {
						const domaindiv = document.getElementById("domain");
						const b = document.createElement("b");
							b.style.fontSize = "25px";
							b.innerHTML = "Deceased of " + domain;
						domaindiv.append(b);

						const table = document.createElement("table");
							table.border = "1";
							table.rules = "cols";
							table.cellspacing = "0";
							table.cellpadding = "3";
							table.id = DeceasedId;
						domaindiv.append(table);
						domaindiv.append(document.createElement("br"));

						const row = table.insertRow(-1);
							row.style.backgroundColor  = "black";
							let cell = document.createElement("th");
								cell.scope = "col";
								cell.innerHTML = "<b>Name(s)</b>";
						row.appendChild(cell);

						AddEditionHeader(DeceasedId);
					}
					const row = document.getElementById(DeceasedId).insertRow(-1);
					row.insertCell(-1).innerHTML = character.Name;
					AddEditionsToTable(row, character.Editions);
					colorCode(DeceasedId);
				} else {
					const row = document.getElementById(domain).insertRow(-1);
					row.insertCell(-1).innerHTML = character.Name;
					AddEditionsToTable(row, character.Editions);
					colorCode(domain);
				}
			}

			const Groups = character.Types.split(',');
			for (const group of Groups) {
				if (!group || group == "Deceased") continue;
				
				if (!document.getElementById(group)) {
					const groupdiv = document.getElementById("group");
					const b = document.createElement("b");
						b.style.fontSize = "25px";
						b.innerHTML = group;
						groupdiv.append(b);

					const table = document.createElement("table");
						table.border = "1";
						table.rules = "cols";
						table.cellspacing = "0";
						table.cellpadding = "3";
						table.id = group;
					groupdiv.append(table);
					groupdiv.append(document.createElement("br"));

					const row = table.insertRow(-1);
						row.style.backgroundColor  = "black";
						let cell = document.createElement("th");
							cell.scope = "col";
							cell.innerHTML = "<b>Name(s)</b>";
					row.appendChild(cell);

						cell = document.createElement("th");
							cell.scope = "col";
							cell.innerHTML = "<b>Domain(s)</b>";
					row.appendChild(cell);

					AddEditionHeader(group);
				}
				const row = document.getElementById(group).insertRow(-1);
				row.insertCell(-1).innerHTML = character.Name;
				row.insertCell(-1).innerHTML = character.Domains;
				AddEditionsToTable(row, character.Editions);
				colorCode(group);
			}
		}
	}
	func();
	</script>
</body>
</html>