<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Locations</title>
	<meta name="theme-color" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ravenloft Repository">
	<link rel="stylesheet" href="../styles.css">
	<link rel="shortcut icon" href="../favicon.ico">
	<script src="../sort.js" charset="utf-8"></script>
</head>

<body>
	<h1>
		<a href=".."		 >Official </a> |
		<a href="../3rdParty">3rd Party</a>
	</h1><hr />
	
	<h2>
		<a href="../Source"	  >Sources   </a> | 
		<a href="../Domain"	  >Domains   </a> | 
		<a href="../Location" >Locations </a> | 
		<a href="../Character">Characters</a> | 
		<a href="../Item"	  >Items	 </a>
	</h2><hr />
	
	<h2>
		<input type="button" onclick="SwapDisplay('all')" value="All Locations"> | 
		<input type="button" onclick="SwapDisplay('lair')" value = "Darklord Lairs"> |
		<input type="button" onclick="SwapDisplay('settlement')" value = "Settlements"> |
		<input type="button" onclick="SwapDisplay('mistway')" value = "Mistways">
	</h2><br/>

	<div id="all" style="display:block">
	</div>
	
	<div id="lair" style="display:none">
	<b style="font-size:25px">List of Darklord Lairs</b>
	<table cellspacing="0" cellpadding="3" rules="cols" border="1" id="LairTable">
		<tr style="background-color:Black">
			<th scope="col">
				<b>Name(s)</b>
			</th>
			<th scope="col">
				<b>Domain(s)</b>
			</th>
			<th scope="col">
				<b>Darklord</b>
			</th>
		</tr>
	</table>
	</div>

	<div id="settlement" style="display:none">
		Settlements are generally places like towns, villages and cities where player characters can buy/sell/trade and rest up.
		<br/><br/>
	</div>

	<div id="mistway" style="display:none">
	<b style="font-size:25px">List of Mistways</b>
	<table cellspacing="0" cellpadding="3" rules="cols" border="1" id="MistTable">
		<tr style="background-color:Black">
			<th scope="col">
				<b>Name(s)</b>
			</th>
			<th scope="col">
				<b>Domain</b>
			</th>
			<th scope="col">
				<b>Domain</b>
			</th>
		</tr>
	</table>
	</div>
	
	<script>
	function SwapDisplay(name) {
		if (name == "all") {
			document.getElementById("all").style.display = "block";
			document.getElementById("lair").style.display = "none";
			document.getElementById("settlement").style.display = "none";
			document.getElementById("mistway").style.display = "none";
		} else if (name == 'lair'){
			document.getElementById("all").style.display = "none";
			document.getElementById("lair").style.display = "block";
			document.getElementById("settlement").style.display = "none";
			document.getElementById("mistway").style.display = "none";
		} else if (name == 'settlement'){
			document.getElementById("all").style.display = "none";
			document.getElementById("lair").style.display = "none";
			document.getElementById("settlement").style.display = "block";
			document.getElementById("mistway").style.display = "none";
		} else if (name == 'mistway'){
			document.getElementById("all").style.display = "none";
			document.getElementById("lair").style.display = "none";
			document.getElementById("settlement").style.display = "none";
			document.getElementById("mistway").style.display = "block";
		}
	}
	
	async function func(){
		const LairTable = document.getElementById("LairTable");
		const MistTable = document.getElementById("MistTable");
		const EditionData = await fetch("../Edition.csv");
		const Editions = (await EditionData.text()).split(',');
		for (edition of Editions) {
			let cell = document.createElement("th");
				cell.scope = "col";
				cell.innerHTML = "<b>" + edition + "</b>";
			LairTable.rows[0].appendChild(cell);
			cell = document.createElement("th");
				cell.scope = "col";
				cell.innerHTML = "<b>" + edition + "</b>";
			MistTable.rows[0].appendChild(cell);
		}
		
		const LocationsData = await fetch("Location.json");
		const Locations = await LocationsData.json();
		for (const location of Locations) {
			const Domains = location.Domains.split(',');
			for (const domain of Domains) {
				if (!document.getElementById(domain)) {
					const alldiv = document.getElementById("all");

					const b = document.createElement("b");
						b.style.fontSize = "25px";
						b.innerHTML = "Locations of " + domain;
					alldiv.append(b);

					const table = document.createElement("table");
						table.border = "1";
						table.rules = "cols";
						table.cellspacing = "0";
						table.cellpadding = "3";
						table.id = domain;
					alldiv.append(table);

					const row = table.insertRow(-1);
					row.style.backgroundColor  = "black";
						let cell = document.createElement("th");
							cell.scope = "col";
							cell.innerHTML = "<b>Name(s)</b>";
					row.appendChild(cell);
					
					for (edition of Editions) {
						cell = document.createElement("th");
							cell.scope = "col";
							cell.innerHTML = "<b>" + edition + "</b>";
						row.appendChild(cell);
					}
					alldiv.append(document.createElement("br"));
				}
				let row = document.getElementById(domain).insertRow(-1);
				row.insertCell(-1).innerHTML = location.Name;
				for (const edition of location.Editions) {
					const cell = row.insertCell(-1);
					if (edition > 0) {
						cell.innerText = edition ? "X" : "";
					}
				}
				colorCode(domain);

				if (location.Types.includes("Settlement")){
					const SettlementTableId = "Settlements of " + domain;
					if (!document.getElementById(SettlementTableId)) {
						const alldiv = document.getElementById("settlement");

						const b = document.createElement("b");
							b.style.fontSize = "25px";
							b.innerHTML = "Settlements of " + domain;
						alldiv.append(b);

						const table = document.createElement("table");
							table.border = "1";
							table.rules = "cols";
							table.cellspacing = "0";
							table.cellpadding = "3";
							table.id = SettlementTableId;
						alldiv.append(table);

						const row = table.insertRow(-1);
						row.style.backgroundColor  = "black";
							let cell = document.createElement("th");
								cell.scope = "col";
								cell.innerHTML = "<b>Name(s)</b>";
						row.appendChild(cell);
						
						for (edition of Editions) {
							cell = document.createElement("th");
								cell.scope = "col";
								cell.innerHTML = "<b>" + edition + "</b>";
							row.appendChild(cell);
						}
						alldiv.append(document.createElement("br"));
					}
					row = document.getElementById(SettlementTableId).insertRow(-1);
					row.insertCell(-1).innerHTML = location.Name;
					for (const edition of location.Editions) {
						const cell = row.insertCell(-1);
						if (edition > 0) {
							cell.innerText = edition ? "X" : "";
						}
					}
					colorCode(SettlementTableId);
				}
			}
			if (location.Types.includes("Darklord")){
				const row = LairTable.insertRow(-1);
				row.insertCell(-1).innerHTML = location.Name;
				row.insertCell(-1).innerHTML = location.Domains;
				row.insertCell(-1).innerHTML = location.Types.split("Darklord")[1];
				for (const edition of location.Editions) {
					const cell = row.insertCell(-1);
					if (edition > 0) {
						cell.innerText = edition ? "X" : "";
					}
				}
			}
			if (location.Types.includes("Mistway")){
				const row = MistTable.insertRow(-1);
				row.insertCell(-1).innerHTML = location.Name;
				row.insertCell(-1).innerHTML = location.Domains[0];
				row.insertCell(-1).innerHTML = location.Domains[1];
				for (const edition of location.Editions) {
					const cell = row.insertCell(-1);
					if (edition > 0) {
						cell.innerText = edition ? "X" : "";
					}
				}
			}
		}
		colorCode('LairTable');
		colorCode('MistTable');
	}
	func();
	</script>
</body>
</html>