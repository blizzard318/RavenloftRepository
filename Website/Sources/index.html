<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Editions</title>
	<meta name="theme-color" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ravenloft Repository">
	<link rel="stylesheet" href="../styles.css">
	<link rel="shortcut icon" href="../favicon.ico">
	<script src="../sort.js" charset="utf-8"></script>
	<style>h2{font-size:1.5em;text-align:center;margin-top:0px;}</style>
</head>

<body>
	<h1>
		<a href="..">Official</a> |
		<a href="../3rdParty">3rd Party</a>
	</h1><hr />
	
	<h2>
		<a href="../Source">	Sources   </a> | 
		<a href="../Domain">	Domains   </a> | 
		<a href="../Location">	Locations </a> | 
		<a href="../Character">	Characters</a> | 
		<a href="../Item">		Items	  </a>
	</h2><hr />
	
	<b style="font-size:25px">List of Medias</b>
	<table cellspacing="0" cellpadding="3" rules="cols" border="1" id="MainTable">
		<tr style="background-color:Black">
			<th scope="col">
				<b>Name</b>
			</th>
			<th scope="col" onclick="SortTable('MainTable',1)" style="cursor:pointer">
				<b>Edition</b>
			</th>
			<th scope="col" onclick="SortTable('MainTable',2)" style="cursor:pointer">
				<b>Release Date</b>
			</th>
			<th scope="col" onclick="SortTable('MainTable',3)" style="cursor:pointer">
				<b>Media Type</b>
			</th>
		</tr>
	</table>
	
	<div id="after"></div>
	
	<script>
	fetch("data.json")
	  .then(value => value.json())
	  .then(data => {
		const Sources = JSON.parse(JSON.stringify(data));
		
		let cols = [];
		for (let i = 0; i < Sources.length; i++) {
			for (let k in Sources[i]) {
				if (cols.indexOf(k) === -1) { //Prevents duplication somehow
					cols.push(k);
				}
			}
		}
		
		const MainTable = document.getElementById("MainTable");
		for (const source of Sources) {
			let row = MainTable.insertRow(-1); // Create a new row
			
			let cell = row.insertCell(-1);
				let a = document.createElement("a");
				a.setAttribute("href","#" + source.Name);
				a.innerHTML = source.Name;
			cell.innerHTML = a.outerHTML;
			
			cell = row.insertCell(-1);
			cell.innerHTML = media.Sources.length;
			
			const b = document.createElement("b");
				b.style.fontSize = "25px";
				b.innerHTML = media.Name;
			AfterTable.append(b);
			
			const table = document.createElement("table");
				table.border = "1";
				table.rules = "cols";
				table.cellspacing = "0";
				table.cellpadding = "3";
				table.id = media.Name;
				
				row = table.insertRow(-1);
				row.style.backgroundColor  = "black";
					cell = document.createElement("th");
					cell.scope = "col";
					cell.innerHTML = "<b>Name</b>";
				row.appendChild(cell);
				
					cell = document.createElement("th");
					cell.scope = "col";
					cell.style.cursor = "pointer";
					cell.innerHTML = "<b>Release Date</b>";
					cell.title = "DD/MM/YYYY";
					cell.setAttribute('onclick', 'sortTable(' + media.Name + ', 1)');
				row.appendChild(cell);
				
					cell = document.createElement("th");
					cell.scope = "col";
					cell.style.cursor = "pointer";
					cell.innerHTML = "<b>Edition</b>";
					cell.setAttribute('onclick', 'sortDate(' + media.Name + ', 2)');
				row.appendChild(cell);
				
				for (const source of media.Sources) {
					row = table.insertRow(-1);
					
					cell = row.insertCell(-1);
						a = document.createElement("a");
						a.setAttribute("href","../Source/" + source.Name.replace(":",""));
						a.innerHTML = source.Name;
					cell.innerHTML = a.outerHTML;
					
					cell = row.insertCell(-1);
					cell.innerHTML = source.ReleaseDate;
					
					cell = row.insertCell(-1);
						a = document.createElement("a");
						a.setAttribute("href","../Edition/#" + source.Edition);
						a.innerHTML = source.Edition;
					cell.innerHTML = a.outerHTML;
				}
			AfterTable.append(table);
			if (edition.ExtraInfo)
				AfterTable.append(document.createTextNode(edition.ExtraInfo));
			colorCode(media.Name);
		}
		colorCode("MainTable");
	});
	</script>
</body>
</html>