<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Editions</title>
	<meta name="theme-color" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ravenloft Repository">
	<link rel="stylesheet" href="../styles.css">
	<link rel="shortcut icon" href="../favicon.ico">
	<script src="../sort.js" charset="utf-8"></script>
	<style>h2{font-size:1.5em;text-align:center;margin-top:0px;}</style>
</head>

<body>
	<h1>
		<a href="..">Official</a> |
		<a href="../3rdParty">3rd Party</a>
	</h1><hr />
	
	<h2>
		<a href="../Source">	Sources   </a> | 
		<a href="../Domain">	Domains   </a> | 
		<a href="../Location">	Locations </a> | 
		<a href="../Character">	Characters</a> | 
		<a href="../Item">		Items	  </a>
	</h2><hr />
	
	<b style="font-size:25px">List of Editions</b>
	<table cellspacing="0" cellpadding="3" rules="cols" border="1" id="MainTable">
		<tr style="color:White;background-color:Black;font-weight:bold;">
			<th scope="col">
				Name
			</th>
			<th scope="col">
				Source Materials
			</th>
		</tr>
	</table>
	
	<div id="after"></div>
	
	<script>
	fetch("data.json")
	  .then(value => value.json())
	  .then(data => {
		const Editions = JSON.parse(JSON.stringify(data));
		
		let cols = [];
		for (let i = 0; i < Editions.length; i++) {
			for (let k in Editions[i]) {
				if (cols.indexOf(k) === -1) { //Prevents duplication somehow
					cols.push(k);
				}
			}
		}
		
		const AfterTable = document.getElementById("after");
		const MainTable = document.getElementById("MainTable");
		for (const edition in Editions)
			AfterTable.append(document.createElement("br"));
			
			let row = MainTable.insertRow(-1); // Create a new row
			
			let cell = row.insertCell(-1);
				const a = document.createElement("a");
				a.setAttribute("href","#" + edition.Name);
				a.innerHTML = edition.Name;
			cell.innerHTML = a.outerHTML;
			
			cell = row.insertCell(-1);
			cell.innerHTML = edition.Sources.length;
			
			const b = document.createElement("b");
				b.style.fontSize = "25px";
				b.innerHTML = edition.Name;
			AfterTable.append(b);
			
			const table = document.createElement("table");
				table.border = "1";
				table.rules = "cols";
				table.cellspacing = "0";
				table.cellpadding = "3";
				table.id = edition.Name;
				if (edition.ExtraInfo)
					table.createCaption.textContent  = "<b>" + edition.Name + "</b>";
				
				row = table.insertRow(-1);
				row.style.color = "white";
				row.style.fontWeight = "bold";
				row.style.backgroundColor  = "black";
					cell = document.createElement("th");
					cell.scope = "col";
					cell.innerHTML = "Name";
				row.appendChild(cell);
				
					cell = document.createElement("th");
					cell.scope = "col";
					cell.innerHTML = "Release Date";
				row.appendChild(cell);
				
					cell = document.createElement("th");
					cell.scope = "col";
					cell.innerHTML = "Media Type";
				row.appendChild(cell);
				
				for (const source in edition.Sources) {
					row = table.insertRow(-1);
					
					cell = row.insertCell(-1);
						const a = document.createElement("a");
						a.setAttribute("href","../Source/" + source.Name);
						a.innerHTML = source.Name;
					cell.innerHTML = a.outerHTML;
					
					cell = row.insertCell(-1);
					cell.innerHTML = new Date(source.ReleaseDate);
					
					cell = row.insertCell(-1);
					cell.innerHTML = source.MediaType;
				}
			AfterTable.append(table);
			colorCode(table);
		}
		colorCode(MainTable);
	});
	</script>
</body>
</html>